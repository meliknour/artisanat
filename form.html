<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</title>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
  <h1>ØªØ³Ø¬ÙŠÙ„ Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h1>
  <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:</label>
  <input type="text" id="productName"><br><br>

  <label>Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ (URL):</label>
  <input type="text" id="productImageUrl"><br><br>

  <label>Ø§Ù„ÙˆØµÙ:</label>
  <textarea id="description"></textarea><br><br>

  <button onclick="saveProduct()">Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>

  <div id="qrcode" style="margin-top:20px;"></div>

<script>
  // ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ Firebase
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  async function saveProduct() {
    const name = document.getElementById("productName").value;
    const image = document.getElementById("productImageUrl").value;
    const desc = document.getElementById("description").value;

    const docRef = await db.collection("products").add({
      name: name,
      image: image,
      description: desc,
      createdAt: new Date()
    });

    const id = docRef.id;
    const url = `https://meliknour.github.io/artisanat/index.html?id=${id}`;

    // ØªÙˆÙ„ÙŠØ¯ QR Ù„Ù„Ø±Ø§Ø¨Ø·
    document.getElementById("qrcode").innerHTML = "";
    new QRCode(document.getElementById("qrcode"), {
      text: url,
      width: 128,
      height: 128
    });

    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬! QR Ø¬Ø§Ù‡Ø²");
  }
</script>
</body>
</html>
