<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // âœ… Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyDq-S2CBiNmccar_neNVg5T95XbwV6t0cY",
      authDomain: "artisanat-161f3.firebaseapp.com",
      projectId: "artisanat-161f3",
      storageBucket: "artisanat-161f3.appspot.com",
      messagingSenderId: "203989144161",
      appId: "1:203989144161:web:88273bf2b917ddc0a65020",
      measurementId: "G-9350J62Z5H"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // âœ… Ø¬Ù„Ø¨ id Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
    const params = new URLSearchParams(window.location.search);
    const productId = params.get("id");

    const container = document.getElementById("productDetails");

    async function loadProduct() {
      if (!productId) {
        container.innerHTML = "<p>âŒ Ù„Ù… ÙŠØªÙ… ØªÙ…Ø±ÙŠØ± Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬.</p>";
        return;
      }

      try {
        const docRef = doc(db, "products", productId);
        const docSnap = await getDoc(docRef);

        if (docSnap.exists()) {
          const data = docSnap.data();

          container.innerHTML = `
            <h2>${data.name || "Ù…Ù†ØªØ¬ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}</h2>
            <img src="${data.image || ""}" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬" style="max-width:300px;border-radius:10px;margin:10px 0;">
            <p><b>Ø§Ù„Ù†ÙˆØ¹:</b> ${data.type || "-"}</p>
            <p><b>Ø§Ù„Ø³Ø¹Ø±:</b> ${data.price || "-"}</p>
            <p><b>Ù…Ø¯Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²:</b> ${data.duration || "-"}</p>
            <p><b>Ø§Ù„Ø­Ø¬Ù…:</b> ${data.size || "-"}</p>
            <p><b>Ø§Ù„ÙˆØ²Ù†:</b> ${data.weight || "-"}</p>
            <p><b>Ø§Ù„Ø§Ø³ØªØ¹Ù…Ø§Ù„:</b> ${data.usage || "-"}</p>
            <p><b>Ø§Ù„Ø£Ù„ÙˆØ§Ù†:</b> ${data.colors || "-"}</p>
            <p><b>Ù†ÙˆØ¹ Ø§Ù„ØªØ²ÙŠÙŠÙ† ÙˆØ§Ù„Ø±Ù…ÙˆØ²:</b> ${data.decoration || "-"}</p>
            <p><b>Ø§Ù„Ø¥Ù†ØªØ§Ø¬:</b> ${data.production || "-"}</p>
            <p><b>Ø§Ù„Ù…ØµØ¯Ø±:</b> ${data.source || "-"}</p>
            <p><b>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ¯Ø®Ù„ÙŠÙ†:</b> ${data.people || "-"}</p>
            <p><b>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£ÙˆÙ„ÙŠØ©:</b> ${data.materials || "-"}</p>
            <p><b>Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²:</b> ${data.steps || "-"}</p>
            <p><b>Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³ØªØ¹Ù…Ù„Ø©:</b> ${data.tools || "-"}</p>
            <p><b>Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ¹Ù…Ù„Ø©:</b> ${data.techniques || "-"}</p>
            <p><b>Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø¨ØªÙƒØ±Ø©:</b> ${data.innovation || "-"}</p>
            <p><b>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©:</b> ${data.timestamp?.toDate ? data.timestamp.toDate().toLocaleString() : "-"}</p>
            <a href="view.html" class="btn-back">â¬…ï¸ Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</a>
          `;
        } else {
          container.innerHTML = "<p>âŒ Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.</p>";
        }
      } catch (error) {
        console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬:", error);
        container.innerHTML = "<p>âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬.</p>";
      }
    }

    loadProduct();
  </script>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; padding:20px; }
    .container { background:#fff; padding:20px; border-radius:15px; box-shadow:0 0 10px rgba(0,0,0,.1); max-width:600px; margin:auto; }
    h1, h2 { text-align:center; color:#3a3b57; }
    p { margin:8px 0; }
    b { color:#333; }
    .btn-back { display:inline-block; margin-top:20px; padding:10px 15px; background:#3498db; color:white; text-decoration:none; border-radius:8px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</h1>
    <div id="productDetails">â³ Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
  </div>
</body>
</html>
